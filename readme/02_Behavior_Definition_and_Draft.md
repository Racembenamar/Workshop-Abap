# Part 2: Behavior Definition and Drafts

## 1. Creating the Behavior Definition (BDEF)
The BDEF defines **what** the application can do (Create, Update, Delete).
- Right-click the CDS view -> New Behavior Definition.
- Implementation type: `Managed`.

## 2. Enabling Drafts
Drafts allow users to save their work in an intermediate state before finalizing it.
- Add `with draft;` at the top.
- Define a `draft table zproducts_draft`.
- Add draft actions: `Edit`, `Resume`, `Activate`, `Discard`.
- Add `draft determine action Prepare`.

## 3. Defining Capabilities
- `create`, `update`, `delete`: Standard CRUD operations.
- `lock master`: Ensures only one user edits a record at a time.
- `total etag last_changed_at`: Handles optimistic locking.

## 4. Early Numbering (Advanced)
We want the Product ID to be generated immediately when the user clicks "Create".
- Add `early numbering` to the BDEF.
- Mark `product_id` as `readonly` so the user cannot type it.

**Key Concept:**
The **Draft Table** is automatically generated by ADT. It mirrors the database table but allows storing incomplete data. The **Prepare** action is crucial for running validations before the draft becomes active.
